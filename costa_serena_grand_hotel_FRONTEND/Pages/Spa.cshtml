@page
@model costa_serena_grand_hotel_FRONTEND.Pages.SpaModel
@using costa_serena_grand_hotel_FRONTEND.Services
@inject AuthSession AuthSession
@{
    ViewData["Title"] = "Wellness & Spa";
}

<!-- HEADER -->
<header class="position-fixed top-0 start-0 end-0 z-3 header-glass">
    <nav class="container d-flex align-items-center justify-content-between py-3">
        <button class="btn btn-link text-dark text-decoration-none p-0 d-flex align-items-center gap-2"
                type="button"
                data-bs-toggle="offcanvas"
                data-bs-target="#menu"
                aria-controls="menu">
            <span class="hamburger" aria-hidden="true"></span>
            <span class="small text-uppercase ls">Menü</span>
        </button>

        <a class="text-dark text-decoration-none fw-semibold ls" href="#" style="font-size:.95rem;">
            Costa Serena Grand Hotel
        </a>

        @if (!AuthSession.IsSignedIn)
        {
            <div class="d-flex gap-2">
                <a class="btn btn-outline-dark btn-sm rounded-pill px-3" asp-page="/Account/Login">
                    Bejelentkezés
                </a>
                <a class="btn btn-dark btn-sm rounded-pill px-3" asp-page="/Account/Register">
                    Regisztráció
                </a>
            </div>
        }
        else
        {
            <div class="d-flex align-items-center gap-3">
                <span class="small text-uppercase ls text-body-secondary">
                    @AuthSession.GetEmail()
                    @if (AuthSession.IsInRole("Admin"))
                    {
                        <span class="badge bg-danger ms-2">Admin</span>
                    }
                    else if (AuthSession.IsInRole("User"))
                    {
                        <span class="badge bg-warning ms-2">User</span>
                    }
                </span>

                <form method="post" asp-page="/Account/Logout" class="d-inline">
                    <button type="submit" class="btn btn-outline-dark btn-sm rounded-pill px-3">
                        Kijelentkezés
                    </button>
                </form>
            </div>
        }
    </nav>
</header>
<!--<header class="position-fixed top-0 start-0 end-0 z-3 header-glass">
    <nav class="container d-flex align-items-center justify-content-between py-3">

        <button class="btn btn-link text-dark text-decoration-none p-0 d-flex align-items-center gap-2"
                type="button"
                data-bs-toggle="offcanvas"
                data-bs-target="#menu"
                aria-controls="menu">
            <span class="hamburger" aria-hidden="true"></span>
            <span class="small text-uppercase ls">Menü</span>
        </button>

        <a class="text-dark text-decoration-none fw-semibold ls"
           asp-page="/Index"
           style="font-size:.95rem;">
            Costa Serena Grand Hotel
        </a>

        <div class="d-flex gap-2">
            <a href="/Account/Login"
               class="btn btn-outline-dark btn-sm rounded-pill px-3">
                Belépés
            </a>
            <a href="/Account/Register"
               class="btn btn-dark btn-sm rounded-pill px-3">
                Regisztráció
            </a>
        </div>

    </nav>
</header>       EZ A RÉGI HEADER DE NEM TUDOM HOGY JO E AMIT MOST RAKOK BELE-->

<!-- OFFCANVAS: MENU -->
<div class="offcanvas offcanvas-start bg-white text-dark" tabindex="-1" id="menu">
    <div class="offcanvas-header border-bottom border-dark border-opacity-10">
        <h5 class="offcanvas-title ls">MENÜ</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">

        <div class="vstack gap-2">
            <a class="link-dark text-decoration-none" asp-page="/Index">Főoldal</a>
            <a class="link-dark text-decoration-none" asp-page="/Spa">Wellness & Spa</a>
            <a class="link-dark text-decoration-none" asp-page="/Contact">Kapcsolat</a>
        </div>

        <hr class="my-4 opacity-25" />

        <div class="small text-uppercase ls text-body-secondary mb-2">Gyors elérés</div>
        <div class="vstack gap-2">
            <a class="link-dark text-decoration-none" asp-page="/Spa" asp-fragment="kezelesek">Kezelések</a>
            <a class="link-dark text-decoration-none" asp-page="/Spa" asp-fragment="galeria">Képek</a>
            <a class="link-dark text-decoration-none" asp-page="/Spa" asp-fragment="arak">Árak</a>
        </div>
    </div>
</div>

<!-- ===== OLDAL TARTALOM ===== -->
<main text-dark">

    <!-- HERO -->
    <section class="section-paper border-bottom">
        <div class="container py-5">
            <div class="row align-items-center g-4">

                <div class="col-lg-7">
                    <p class="text-uppercase small text-secondary mb-2">
                        Costa Serena Grand Hotel
                    </p>

                    <h1 class="display-5 fw-bold mb-3">Wellness &amp; Spa</h1>

                    <p class="lead text-secondary mb-4">
                        A nyugalom, a csend és a kiemelkedő színvonalú gondoskodás harmóniája.
                        Letisztult környezet és olyan szolgáltatások, amelyek teljes körű
                        feltöltődést biztosítanak.
                    </p>

                    <div class="d-flex flex-wrap gap-2">
                        <a class="btn btn-outline-dark rounded-pill px-4" href="#kezelesek">Kezelések</a>
                        <a class="btn btn-dark rounded-pill px-4" href="#galeria">Képek</a>
                    </div>
                </div>

                <div class="col-lg-5">
                    <div class="border rounded-4 p-4 text-center bg-light">
                        <img src="/Kepek/mazzsirozzakanot.png"
                             alt="Hotel Spa"
                             class="img-fluid rounded-4 js-lightbox"
                             style="cursor: zoom-in;"
                             data-full="/Kepek/mazzsirozzakanot.png" />
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- KEZELÉSEK -->
    <section id="kezelesek" class="section-soft">
        <div class="container py-5">
            <h2 class="h3 fw-bold mb-4">Kezelések</h2>

            <div class="row g-4">

                <div class="col-md-4">
                    <div class="card h-100 shadow border-0 rounded-4 overflow-hidden">
                        <img class="w-100 h-75 js-lightbox"
                             src="/Kepek/hatmazzsazs.png"
                             alt="Relax masszázs"
                             style="height:260px; object-fit:cover; cursor: zoom-in;"
                             data-full="/Kepek/hatmazzsazs.png" />

                        <div class="card-body text-center">
                            <h5 class="fw-semibold">Relax masszázs</h5>
                            <p class="text-secondary small mb-0">
                                Teljes testi-lelki feltöltődés.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card h-100 shadow border-0 rounded-4 overflow-hidden">
                        <img class="w-100 h-75 js-lightbox"
                             src="/Kepek/arckezeles.png"
                             alt="Arckezelés"
                             style="height:260px; object-fit:cover; cursor: zoom-in;"
                             data-full="/Kepek/arckezeles.png" />

                        <div class="card-body text-center">
                            <h5 class="fw-semibold">Arckezelés</h5>
                            <p class="text-secondary small mb-0">
                                Ragyogó, hidratált bőr.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card h-100 shadow border-0 rounded-4 overflow-hidden">
                        <img class="w-100 h-75 js-lightbox"
                             src="/Kepek/szauna.png"
                             alt="Szaunavilág"
                             style="height:260px; object-fit:cover; cursor: zoom-in;"
                             data-full="/Kepek/szauna.png" />

                        <div class="card-body text-center">
                            <h5 class="fw-semibold">Szaunavilág</h5>
                            <p class="text-secondary small mb-0">
                                Finn szauna, gőzkabin, relax zóna.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- KÉPGALÉRIA (Carousel) -->
    <section id="galeria" class="section-paper border-top">
        <div class="container py-5">
            <div class="d-flex align-items-end justify-content-between flex-wrap gap-3 mb-3">
                <div>
                    <h2 class="h3 fw-bold mb-1">Képek</h2>
                    <div class="text-secondary">Kattints a képre a teljes képernyős megnyitáshoz.</div>
                </div>
            </div>

            <div id="spaCarousel" class="carousel slide border rounded-4 overflow-hidden shadow-sm" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#spaCarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#spaCarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#spaCarousel" data-bs-slide-to="2"></button>
                    <button type="button" data-bs-target="#spaCarousel" data-bs-slide-to="3"></button>
                    <button type="button" data-bs-target="#spaCarousel" data-bs-slide-to="4"></button>
                </div>

                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="/Kepek/jakuzzi.png"
                             class="d-block w-100 js-lightbox"
                             alt="Spa galéria 1"
                             style="height:460px; object-fit:cover; cursor: zoom-in;"
                             data-full="/Kepek/jakuzzi.png">
                    </div>

                    <div class="carousel-item">
                        <img src="/Kepek/folyoso.png"
                             class="d-block w-100 js-lightbox"
                             alt="Spa galéria 2"
                             style="height:460px; object-fit:cover; cursor: zoom-in;"
                             data-full="/Kepek/folyoso.png">
                    </div>

                    <div class="carousel-item">
                        <img src="/Kepek/kulsoresz.png"
                             class="d-block w-100 js-lightbox"
                             alt="Spa galéria 3"
                             style="height:460px; object-fit:cover; cursor: zoom-in;"
                             data-full="/Kepek/kulsoresz.png">
                    </div>

                    <div class="carousel-item">
                        <img src="/Kepek/pezsgogyumolcs.png"
                             class="d-block w-100 js-lightbox"
                             alt="Spa galéria 4"
                             style="height:460px; object-fit:cover; cursor: zoom-in;"
                             data-full="/Kepek/pezsgogyumolcs.png">
                    </div>

                    <div class="carousel-item">
                        <img src="/Kepek/szaunak.png"
                             class="d-block w-100 js-lightbox"
                             alt="Spa galéria 5"
                             style="height:460px; object-fit:cover; cursor: zoom-in;"
                             data-full="/Kepek/szaunak.png">
                    </div>
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#spaCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                    <span class="visually-hidden">Előző</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#spaCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                    <span class="visually-hidden">Következő</span>
                </button>
            </div>
        </div>
    </section>

    <!-- ÁRAK -->
    <section id="arak" class="section-soft border-top">
        <div class="container py-5">
            <h2 class="h3 fw-bold mb-4">Árak</h2>

            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Szolgáltatás</th>
                            <th>Időtartam</th>
                            <th class="text-end">Ár</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Relax masszázs</td>
                            <td>60 perc</td>
                            <td class="text-end">€65</td>
                        </tr>
                        <tr>
                            <td>Arckezelés</td>
                            <td>50 perc</td>
                            <td class="text-end">€55</td>
                        </tr>
                        <tr>
                            <td>Wellness napijegy</td>
                            <td>Egész nap</td>
                            <td class="text-end">€25</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

</main>

<!-- ===== FULLSCREEN LIGHTBOX MODAL (Bootstrap) ===== -->
<div class="modal fade" id="lightboxModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content bg-black">
            <div class="modal-header border-0">
                <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body d-flex align-items-center justify-content-center p-0">
                <img id="lightboxImage"
                     src=""
                     alt="Nagyított kép"
                     class="img-fluid"
                     style="max-height: 92vh; width: auto;" />
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Minden .js-lightbox képre kattintva megnyitjuk a bootstrap fullscreen modalt
        document.addEventListener("DOMContentLoaded", function () {
            const modalEl = document.getElementById("lightboxModal");
            const imgEl = document.getElementById("lightboxImage");
            const modal = new bootstrap.Modal(modalEl);

            document.querySelectorAll(".js-lightbox").forEach(img => {
                img.addEventListener("click", function () {
                    const full = this.getAttribute("data-full") || this.getAttribute("src");
                    imgEl.setAttribute("src", full);
                    modal.show();
                });
            });

            // Bezáráskor ürítjük a src-t (hogy ne “villogjon” következő nyitásnál)
            modalEl.addEventListener("hidden.bs.modal", function () {
                imgEl.setAttribute("src", "");
            });
        });
    </script>
}